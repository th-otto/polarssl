include ../configvars
include ../silent.mak

##
## Makefile for OpenSSL
##
## Originally Generated by Configure from Configurations/common0.tmpl, Configurations/unix-Makefile.tmpl, Configurations/common.tmpl

PLATFORM=mint
OPTIONS=--prefix=/usr --cross-compile-prefix=m68k-atari-mint- enable-zlib no-afalgeng no-asan no-buildtest-c++ no-crypto-mdebug no-crypto-mdebug-backtrace no-devcryptoeng no-dynamic-engine no-ec_nistp_64_gcc_128 no-egd no-external-tests no-fuzz-afl no-fuzz-libfuzzer no-heartbeats no-makedepend no-md2 no-msan no-pic no-rc5 no-sctp no-shared no-ssl-trace no-ssl3 no-ssl3-method no-threads no-ubsan no-unit-test no-weak-ssl-ciphers no-zlib-dynamic
CONFIGURE_ARGS=("--prefix=/usr", "--cross-compile-prefix=m68k-atari-mint-", "mint", "zlib", "no-makedepend")
SRCDIR=.
BLDDIR=.

VERSION=1.1.1p
MAJOR=1
MINOR=1.1

ENGINES=
PROGRAMS = \
	apps/openssl fuzz/asn1-test fuzz/asn1parse-test \
	fuzz/bignum-test fuzz/bndiv-test fuzz/client-test fuzz/cms-test \
	fuzz/conf-test fuzz/crl-test fuzz/ct-test fuzz/server-test \
	fuzz/x509-test test/aborttest test/afalgtest test/asn1_decode_test \
	test/asn1_encode_test test/asn1_internal_test \
	test/asn1_string_table_test test/asn1_time_test test/asynciotest \
	test/asynctest test/bad_dtls_test test/bftest test/bio_callback_test \
	test/bio_enc_test test/bio_memleak_test test/bioprinttest test/bntest \
	test/buildtest_c_aes test/buildtest_c_asn1 test/buildtest_c_asn1t \
	test/buildtest_c_async test/buildtest_c_bio test/buildtest_c_blowfish \
	test/buildtest_c_bn test/buildtest_c_buffer test/buildtest_c_camellia \
	test/buildtest_c_cast test/buildtest_c_cmac test/buildtest_c_cms \
	test/buildtest_c_comp test/buildtest_c_conf test/buildtest_c_conf_api \
	test/buildtest_c_crypto test/buildtest_c_ct test/buildtest_c_des \
	test/buildtest_c_dh test/buildtest_c_dsa test/buildtest_c_dtls1 \
	test/buildtest_c_e_os2 test/buildtest_c_ebcdic test/buildtest_c_ec \
	test/buildtest_c_ecdh test/buildtest_c_ecdsa test/buildtest_c_engine \
	test/buildtest_c_evp test/buildtest_c_hmac test/buildtest_c_idea \
	test/buildtest_c_kdf test/buildtest_c_lhash test/buildtest_c_md4 \
	test/buildtest_c_md5 test/buildtest_c_mdc2 test/buildtest_c_modes \
	test/buildtest_c_obj_mac test/buildtest_c_objects test/buildtest_c_ocsp \
	test/buildtest_c_opensslv test/buildtest_c_ossl_typ \
	test/buildtest_c_pem test/buildtest_c_pem2 test/buildtest_c_pkcs12 \
	test/buildtest_c_pkcs7 test/buildtest_c_rand test/buildtest_c_rand_drbg \
	test/buildtest_c_rc2 test/buildtest_c_rc4 test/buildtest_c_ripemd \
	test/buildtest_c_rsa test/buildtest_c_safestack test/buildtest_c_seed \
	test/buildtest_c_sha test/buildtest_c_srp test/buildtest_c_srtp \
	test/buildtest_c_ssl test/buildtest_c_ssl2 test/buildtest_c_stack \
	test/buildtest_c_store test/buildtest_c_symhacks test/buildtest_c_tls1 \
	test/buildtest_c_ts test/buildtest_c_txt_db test/buildtest_c_ui \
	test/buildtest_c_whrlpool test/buildtest_c_x509 \
	test/buildtest_c_x509_vfy test/buildtest_c_x509v3 test/casttest \
	test/chacha_internal_test test/cipher_overhead_test \
	test/cipherbytes_test test/cipherlist_test test/ciphername_test \
	test/clienthellotest test/cmactest test/cmsapitest \
	test/conf_include_test test/constant_time_test test/crltest \
	test/ct_test test/ctype_internal_test test/curve448_internal_test \
	test/d2i_test test/danetest test/destest test/dhtest \
	test/drbg_cavs_test test/drbgtest test/dsa_no_digest_size_test \
	test/dsatest test/dtls_mtu_test test/dtlstest test/dtlsv1listentest \
	test/ec_internal_test test/ecdsatest test/ecstresstest test/ectest \
	test/enginetest test/errtest test/evp_extra_test test/evp_test \
	test/exdatatest test/exptest test/fatalerrtest test/gmdifftest \
	test/gosttest test/hmactest test/ideatest test/igetest test/lhash_test \
	test/md2test test/mdc2_internal_test test/mdc2test test/memleaktest \
	test/modes_internal_test test/ocspapitest test/packettest \
	test/pbelutest test/pemtest test/pkey_meth_kdf_test test/pkey_meth_test \
	test/poly1305_internal_test test/rc2test test/rc4test test/rc5test \
	test/rdrand_sanitytest test/recordlentest test/rsa_complex \
	test/rsa_mp_test test/rsa_test test/sanitytest test/secmemtest \
	test/servername_test test/siphash_internal_test test/sm2_internal_test \
	test/sm4_internal_test test/srptest test/ssl_cert_table_internal_test \
	test/ssl_ctx_test test/ssl_test test/ssl_test_ctx_test test/sslapitest \
	test/sslbuffertest test/sslcorrupttest test/ssltest_old test/stack_test \
	test/sysdefaulttest test/test_test test/threadstest \
	test/time_offset_test test/tls13ccstest test/tls13encryptiontest \
	test/uitest test/v3ext test/v3nametest test/verify_extra_test \
	test/versions test/wpackettest test/x509_check_cert_pkey_test \
	test/x509_dup_cert_test test/x509_internal_test test/x509_time_test \
	test/x509aux \
	$(empty)

SCRIPTS=apps/tsget.pl

GENERATED_MANDATORY= apps/progs.h crypto/buildinf.h include/crypto/bn_conf.h include/crypto/dso_conf.h include/openssl/opensslconf.h
GENERATED = \
	apps/tsget.pl \
	util/shlib_wrap.sh \
	test/buildtest_aes.c test/buildtest_asn1.c \
	test/buildtest_asn1t.c test/buildtest_async.c test/buildtest_bio.c \
	test/buildtest_blowfish.c test/buildtest_bn.c test/buildtest_buffer.c \
	test/buildtest_camellia.c test/buildtest_cast.c test/buildtest_cmac.c \
	test/buildtest_cms.c test/buildtest_comp.c test/buildtest_conf.c \
	test/buildtest_conf_api.c test/buildtest_crypto.c test/buildtest_ct.c \
	test/buildtest_des.c test/buildtest_dh.c test/buildtest_dsa.c \
	test/buildtest_dtls1.c test/buildtest_e_os2.c test/buildtest_ebcdic.c \
	test/buildtest_ec.c test/buildtest_ecdh.c test/buildtest_ecdsa.c \
	test/buildtest_engine.c test/buildtest_evp.c test/buildtest_hmac.c \
	test/buildtest_idea.c test/buildtest_kdf.c test/buildtest_lhash.c \
	test/buildtest_md4.c test/buildtest_md5.c test/buildtest_mdc2.c \
	test/buildtest_modes.c test/buildtest_obj_mac.c \
	test/buildtest_objects.c test/buildtest_ocsp.c \
	test/buildtest_opensslv.c test/buildtest_ossl_typ.c \
	test/buildtest_pem.c test/buildtest_pem2.c test/buildtest_pkcs12.c \
	test/buildtest_pkcs7.c test/buildtest_rand.c test/buildtest_rand_drbg.c \
	test/buildtest_rc2.c test/buildtest_rc4.c test/buildtest_ripemd.c \
	test/buildtest_rsa.c test/buildtest_safestack.c test/buildtest_seed.c \
	test/buildtest_sha.c test/buildtest_srp.c test/buildtest_srtp.c \
	test/buildtest_ssl.c test/buildtest_ssl2.c test/buildtest_stack.c \
	test/buildtest_store.c test/buildtest_symhacks.c test/buildtest_tls1.c \
	test/buildtest_ts.c test/buildtest_txt_db.c test/buildtest_ui.c \
	test/buildtest_whrlpool.c test/buildtest_x509.c \
	test/buildtest_x509_vfy.c test/buildtest_x509v3.c \
	$(empty)


# DESTDIR is for package builders so that they can configure for, say,
# /usr/ and yet have everything installed to /tmp/somedir/usr/.
# Normally it is left empty.
DESTDIR=


# Do not edit these manually. Use Configure with --prefix or --openssldir
# to change this!  Short explanation in the top comment in Configure
prefix=/usr
OPENSSLDIR=/etc/ssl
LIBDIR=lib
# $(libdir) is chosen to be compatible with the GNU coding standards
libdir=$(prefix)/$(LIBDIR)
ENGINESDIR=$(libdir)/engines-1.1

# Convenience variable for those who want to set the rpath in shared
# libraries and applications
LIBRPATH=$(libdir)


MANDIR=$(prefix)/share/man
DOCDIR=$(prefix)/share/doc/$(BASENAME)
HTMLDIR=$(DOCDIR)/html

# MANSUFFIX is for the benefit of anyone who may want to have a suffix
# appended after the manpage file section number.  "ssl" is popular,
# resulting in files such as config.5ssl rather than config.5.
MANSUFFIX=
HTMLSUFFIX=html

# For "optional" echo messages, to get "real" silence
ECHO = echo

##### User defined commands and flags ################################

# We let the C compiler driver to take care of .s files. This is done in
# order to be excused from maintaining a separate set of architecture
# dependent assembler flags. E.g. if you throw -mcpu=ultrasparc at SPARC
# gcc, then the driver will automatically translate it to -xarch=v8plus
# and pass it down to assembler.  In any case, we do not define AS or
# ASFLAGS for this reason.

CNF_CPPFLAGS=-DOPENSSL_USE_IPV6=0 -DDEVRANDM_WAIT_USE_SELECT=0 -DZLIB -DNDEBUG
LIB_CPPFLAGS=-DB_ENDIAN -DOPENSSL_NO_SECURE_MEMORY -DOPENSSLDIR="\"$(OPENSSLDIR)\"" -DENGINESDIR="\"$(ENGINESDIR)\"" $(CNF_CPPFLAGS) $(CPPFLAGS) \
	-I. -Iinclude -Icrypto/modes -Icrypto/ec -Icrypto/ec/curve448

LOCAL_CFLAGS = $(CFLAGS) $(WARNING_CFLAGS) $(LIB_CPPFLAGS)
LOCAL_CXXFLAGS =$(CXXFLAGS) $(WARNING_CXXFLAGS) $(LIB_CPPFLAGS)
LDFLAGS= -s
EX_LIBS= -lz

PERL=/usr/bin/perl

RC= $(CROSSPREFIX)windres
RCFLAGS= 

RM= rm -f
RMDIR= rmdir
TAR= tar
TARFLAGS= 

BASENAME=       openssl
NAME=           $(BASENAME)-$(VERSION)
# Relative to $(SRCDIR)
TARFILE=        ../$(NAME).tar

all:: $(GENERATED_MANDATORY) $(ENGINES) $(PROGRAMS) $(SCRIPTS)

# The main targets ###################################################

# Convenience target to prebuild all generated files, not just the mandatory
# ones
build_all_generated: $(GENERATED_MANDATORY) $(GENERATED)
	@ : 

test: tests
tests: $(PROGRAMS) $(ENGINES) link-utils
	@ : 
	( cd test; \
	  mkdir -p test-runs; \
	  SRCTOP=../$(SRCDIR) \
	  BLDTOP=../$(BLDDIR) \
	  RESULT_D=test-runs \
	  PERL="$(PERL)" \
	  EXE_EXT= \
	  OPENSSL_ENGINES=`cd ../$(BLDDIR)/engines 2>/dev/null && pwd` \
	  OPENSSL_DEBUG_MEMORY=on \
	    $(PERL) ../$(SRCDIR)/test/run_tests.pl $(TESTS) )
	@ : 

list-tests:
	@ : 
	@SRCTOP="$(SRCDIR)" \
	 $(PERL) $(SRCDIR)/test/run_tests.pl list
	@ : 

libclean:
	$(RM) -rf build .dirs
	$(RM) *.map

clean: libclean
	$(RM) $(PROGRAMS) $(TESTPROGS) $(ENGINES) $(SCRIPTS)
	$(RM) $(GENERATED_MANDATORY) $(GENERATED)
	-$(RM) `find . -name '*.d' \! -name '.*' \! -type d -print`
	-$(RM) `find . -name '*.o' \! -name '.*' \! -type d -print`
	$(RM) core
	$(RM) tags TAGS doc-nits
	$(RM) -r test/test-runs

distclean: clean
	$(RM) Makefile

.dirs:
	@mkdir -p build/68000
	@mkdir -p build/68020
	@mkdir -p build/coldfire
	@mkdir -p build/host
	@touch $@

# Generated files
apps/tsget.pl: apps/tsget.in configdata.pm
	$(AM_V_GEN)$(PERL) "-I$(BLDDIR)" -Mconfigdata "util/dofile.pl" "-oMakefile" $< > $@
	$(AM_V_at)chmod a+x $@
util/shlib_wrap.sh: util/shlib_wrap.sh.in configdata.pm
	$(AM_V_GEN)$(PERL) "-I$(BLDDIR)" -Mconfigdata "util/dofile.pl" "-oMakefile" $< > $@
	$(AM_V_at)chmod a+x $@
include/crypto/bn_conf.h: include/crypto/bn_conf.h.in configdata.pm
	$(PERL) "-I$(BLDDIR)" -Mconfigdata "util/dofile.pl" "-oMakefile" $< > $@
include/crypto/dso_conf.h: include/crypto/dso_conf.h.in configdata.pm
	$(AM_V_GEN)$(PERL) "-I$(BLDDIR)" -Mconfigdata "util/dofile.pl" "-oMakefile" $< > $@
include/openssl/opensslconf.h: include/openssl/opensslconf.h.in configdata.pm
	$(AM_V_GEN)$(PERL) "-I$(BLDDIR)" -Mconfigdata "util/dofile.pl" "-oMakefile" $< > $@
crypto/buildinf.h: util/mkbuildinf.pl configdata.pm
	$(AM_V_GEN)$(PERL) util/mkbuildinf.pl "$(CC) $(LIB_CFLAGS) $(CPPFLAGS_Q)" "$(PLATFORM)" > $@
apps/progs.h: apps/progs.pl configdata.pm
	$(AM_V_GEN)$(PERL) apps/progs.pl apps/openssl > $@

# Developer targets (note: these are only available on Unix) #########

update: generate errors ordinals

generate: generate_crypto_bn generate_crypto_objects \
          generate_crypto_conf generate_crypto_asn1 generate_fuzz_oids

.PHONY: doc-nits
doc-nits:
	(cd $(SRCDIR); $(PERL) util/find-doc-nits -n -p ) >doc-nits
	@if [ -s doc-nits ] ; then cat doc-nits ; exit 1; \
	else echo 'doc-nits: no errors.'; rm doc-nits ; fi

# Test coverage is a good idea for the future
#coverage: $(PROGRAMS) $(TESTPROGRAMS)
#	...

generate_crypto_bn:
	( cd $(SRCDIR); $(PERL) crypto/bn/bn_prime.pl > crypto/bn/bn_prime.h )

generate_crypto_objects:
	( cd $(SRCDIR); $(PERL) crypto/objects/objects.pl -n \
				crypto/objects/objects.txt \
				crypto/objects/obj_mac.num \
				> crypto/objects/obj_mac.new && \
	    mv crypto/objects/obj_mac.new crypto/objects/obj_mac.num )
	( cd $(SRCDIR); $(PERL) crypto/objects/objects.pl \
				crypto/objects/objects.txt \
				crypto/objects/obj_mac.num \
				> include/openssl/obj_mac.h )
	( cd $(SRCDIR); $(PERL) crypto/objects/obj_dat.pl \
				include/openssl/obj_mac.h \
				> crypto/objects/obj_dat.h )
	( cd $(SRCDIR); $(PERL) crypto/objects/objxref.pl \
				crypto/objects/obj_mac.num \
				crypto/objects/obj_xref.txt \
				> crypto/objects/obj_xref.h )

generate_crypto_conf:
	( cd $(SRCDIR); $(PERL) crypto/conf/keysets.pl \
			        > crypto/conf/conf_def.h )

generate_crypto_asn1:
	( cd $(SRCDIR); $(PERL) crypto/asn1/charmap.pl \
			        > crypto/asn1/charmap.h )

generate_fuzz_oids:
	( cd $(SRCDIR); $(PERL) fuzz/mkfuzzoids.pl \
				crypto/objects/obj_dat.h \
				> fuzz/oids.txt )

# Set to -force to force a rebuild
ERROR_REBUILD=
errors:
	( b=`pwd`; set -e; cd $(SRCDIR); \
          $(PERL) util/ck_errf.pl -strict -internal; \
          $(PERL) -I$$b util/mkerr.pl $(ERROR_REBUILD) -internal )
	( b=`pwd`; set -e; cd $(SRCDIR)/engines; \
          for E in *.ec ; do \
              $(PERL) ../util/ck_errf.pl -strict \
                -conf $$E `basename $$E .ec`.c; \
              $(PERL) -I$$b ../util/mkerr.pl $(ERROR_REBUILD) -static \
                -conf $$E `basename $$E .ec`.c ; \
          done )

ordinals:
	$(PERL) $(SRCDIR)/util/mkdef.pl crypto update
	$(PERL) $(SRCDIR)/util/mkdef.pl ssl update

test_ordinals:
	( cd test; \
	  SRCTOP=../$(SRCDIR) \
	  BLDTOP=../$(BLDDIR) \
	    $(PERL) ../$(SRCDIR)/test/run_tests.pl test_ordinals )

tags TAGS: FORCE
	rm -f TAGS tags
	-ctags -R .
	-etags `find . -name '*.[ch]' -o -name '*.pm'`

# Release targets (note: only available on Unix) #####################

tar:
	(cd $(SRCDIR); ./util/mktar.sh --name='$(NAME)' --tarfile='$(TARFILE)')

# Helper targets #####################################################

link-utils: $(BLDDIR)/util/opensslwrap.sh

$(BLDDIR)/util/opensslwrap.sh:
	@if [ "$(SRCDIR)" != "$(BLDDIR)" ]; then \
	    mkdir -p "$(BLDDIR)/util"; \
	    ln -sf "../$(SRCDIR)/util/opensslwrap.sh" "$(BLDDIR)/util"; \
	fi

FORCE:

LIBS=

ifneq ($(CROSSPREFIX),)
CPU_DIR = 68000
TEST_CFLAGS = $(CFLAGS_m68000)
define CC_TEMPLATE
build/68000/$$(notdir $(1).o): .dirs $(1).c
	$(AM_V_CC)$(CC) $(CFLAGS_m68000) $(LOCAL_CFLAGS) -c $(1).c -o $$@
build/68020/$$(notdir $(1).o): .dirs $(1).c
	$(AM_V_CC)$(CC) $(CFLAGS_m68020) $(LOCAL_CFLAGS) -c $(1).c -o $$@
build/coldfire/$$(notdir $(1).o): .dirs $(1).c
	$(AM_V_CC)$(CC) $(CFLAGS_coldfire) $(LOCAL_CFLAGS) -c $(1).c -o $$@
endef
define AR_TEMPLATE
build/68000/$(1): $$(addprefix build/68000/,$$(notdir $(2)))
	$(AM_V_AR)$(AR) $(ARFLAGS) $$@ $$^
build/68020/$(1): $$(addprefix build/68020/,$$(notdir $(2)))
	$(AM_V_AR)$(AR) $(ARFLAGS) $$@ $$^
build/coldfire/$(1): $$(addprefix build/coldfire/,$$(notdir $(2)))
	$(AM_V_AR)$(AR) $(ARFLAGS) $$@ $$^
LIBS += build/68000/$(1) build/68020/$(1) build/coldfire/$(1)
endef
else
CPU_DIR = host
define CC_TEMPLATE
build/host/$(1).o: .dirs $(1).c
	$(AM_V_CC)$(CC) $(LOCAL_CFLAGS) -c $(1).c -o $$@
endef
define AR_TEMPLATE
build/host/$(1): $$(addprefix build/host/,$$(notdir $(2)))
	$(AR) $(ARFLAGS) $$@ $$^
LIBS += build/host/$(1)
endef
endif

all:: $(LIBS)

LIBAPPS_SRCS = apps/app_rand.c apps/apps.c apps/bf_prefix.c apps/opt.c apps/s_cb.c apps/s_socket.c
LIBCRYPTO_SRCS = \
	crypto/aes/aes_cbc.c crypto/aes/aes_cfb.c crypto/aes/aes_core.c \
	crypto/aes/aes_ecb.c crypto/aes/aes_ige.c crypto/aes/aes_misc.c \
	crypto/aes/aes_ofb.c crypto/aes/aes_wrap.c crypto/aria/aria.c \
	crypto/asn1/a_bitstr.c crypto/asn1/a_d2i_fp.c crypto/asn1/a_digest.c \
	crypto/asn1/a_dup.c crypto/asn1/a_gentm.c crypto/asn1/a_i2d_fp.c \
	crypto/asn1/a_int.c crypto/asn1/a_mbstr.c crypto/asn1/a_object.c \
	crypto/asn1/a_octet.c crypto/asn1/a_print.c crypto/asn1/a_sign.c \
	crypto/asn1/a_strex.c crypto/asn1/a_strnid.c crypto/asn1/a_time.c \
	crypto/asn1/a_type.c crypto/asn1/a_utctm.c crypto/asn1/a_utf8.c \
	crypto/asn1/a_verify.c crypto/asn1/ameth_lib.c crypto/asn1/asn1_err.c \
	crypto/asn1/asn1_gen.c crypto/asn1/asn1_item_list.c \
	crypto/asn1/asn1_lib.c crypto/asn1/asn1_par.c crypto/asn1/asn_mime.c \
	crypto/asn1/asn_moid.c crypto/asn1/asn_mstbl.c crypto/asn1/asn_pack.c \
	crypto/asn1/bio_asn1.c crypto/asn1/bio_ndef.c crypto/asn1/d2i_pr.c \
	crypto/asn1/d2i_pu.c crypto/asn1/evp_asn1.c crypto/asn1/f_int.c \
	crypto/asn1/f_string.c crypto/asn1/i2d_pr.c crypto/asn1/i2d_pu.c \
	crypto/asn1/n_pkey.c crypto/asn1/nsseq.c crypto/asn1/p5_pbe.c \
	crypto/asn1/p5_pbev2.c crypto/asn1/p5_scrypt.c crypto/asn1/p8_pkey.c \
	crypto/asn1/t_bitst.c crypto/asn1/t_pkey.c crypto/asn1/t_spki.c \
	crypto/asn1/tasn_dec.c crypto/asn1/tasn_enc.c crypto/asn1/tasn_fre.c \
	crypto/asn1/tasn_new.c crypto/asn1/tasn_prn.c crypto/asn1/tasn_scn.c \
	crypto/asn1/tasn_typ.c crypto/asn1/tasn_utl.c crypto/asn1/x_algor.c \
	crypto/asn1/x_bignum.c crypto/asn1/x_info.c crypto/asn1/x_int64.c \
	crypto/asn1/x_long.c crypto/asn1/x_pkey.c crypto/asn1/x_sig.c \
	crypto/asn1/x_spki.c crypto/asn1/x_val.c crypto/async/arch/async_null.c \
	crypto/async/arch/async_posix.c crypto/async/arch/async_win.c \
	crypto/async/async.c crypto/async/async_err.c crypto/async/async_wait.c \
	crypto/bf/bf_cfb64.c crypto/bf/bf_ecb.c crypto/bf/bf_enc.c \
	crypto/bf/bf_ofb64.c crypto/bf/bf_skey.c crypto/bio/b_addr.c \
	crypto/bio/b_dump.c crypto/bio/b_print.c crypto/bio/b_sock.c \
	crypto/bio/b_sock2.c crypto/bio/bf_buff.c crypto/bio/bf_lbuf.c \
	crypto/bio/bf_nbio.c crypto/bio/bf_null.c crypto/bio/bio_cb.c \
	crypto/bio/bio_err.c crypto/bio/bio_lib.c crypto/bio/bio_meth.c \
	crypto/bio/bss_acpt.c crypto/bio/bss_bio.c crypto/bio/bss_conn.c \
	crypto/bio/bss_dgram.c crypto/bio/bss_fd.c crypto/bio/bss_file.c \
	crypto/bio/bss_log.c crypto/bio/bss_mem.c crypto/bio/bss_null.c \
	crypto/bio/bss_sock.c crypto/blake2/blake2b.c crypto/blake2/blake2s.c \
	crypto/blake2/m_blake2b.c crypto/blake2/m_blake2s.c crypto/bn/bn_add.c \
	crypto/bn/bn_asm.c crypto/bn/bn_blind.c crypto/bn/bn_const.c \
	crypto/bn/bn_ctx.c crypto/bn/bn_depr.c crypto/bn/bn_dh.c \
	crypto/bn/bn_div.c crypto/bn/bn_err.c crypto/bn/bn_exp.c \
	crypto/bn/bn_exp2.c crypto/bn/bn_gcd.c crypto/bn/bn_gf2m.c \
	crypto/bn/bn_intern.c crypto/bn/bn_kron.c crypto/bn/bn_lib.c \
	crypto/bn/bn_mod.c crypto/bn/bn_mont.c crypto/bn/bn_mpi.c \
	crypto/bn/bn_mul.c crypto/bn/bn_nist.c crypto/bn/bn_prime.c \
	crypto/bn/bn_print.c crypto/bn/bn_rand.c crypto/bn/bn_recp.c \
	crypto/bn/bn_shift.c crypto/bn/bn_sqr.c crypto/bn/bn_sqrt.c \
	crypto/bn/bn_srp.c crypto/bn/bn_word.c crypto/bn/bn_x931p.c \
	crypto/buffer/buf_err.c crypto/buffer/buffer.c \
	crypto/camellia/camellia.c crypto/camellia/cmll_cbc.c \
	crypto/camellia/cmll_cfb.c crypto/camellia/cmll_ctr.c \
	crypto/camellia/cmll_ecb.c crypto/camellia/cmll_misc.c \
	crypto/camellia/cmll_ofb.c crypto/cast/c_cfb64.c crypto/cast/c_ecb.c \
	crypto/cast/c_enc.c crypto/cast/c_ofb64.c crypto/cast/c_skey.c \
	crypto/chacha/chacha_enc.c crypto/cmac/cm_ameth.c \
	crypto/cmac/cm_pmeth.c crypto/cmac/cmac.c crypto/cms/cms_asn1.c \
	crypto/cms/cms_att.c crypto/cms/cms_cd.c crypto/cms/cms_dd.c \
	crypto/cms/cms_enc.c crypto/cms/cms_env.c crypto/cms/cms_err.c \
	crypto/cms/cms_ess.c crypto/cms/cms_io.c crypto/cms/cms_kari.c \
	crypto/cms/cms_lib.c crypto/cms/cms_pwri.c crypto/cms/cms_sd.c \
	crypto/cms/cms_smime.c crypto/comp/c_zlib.c crypto/comp/comp_err.c \
	crypto/comp/comp_lib.c crypto/conf/conf_api.c crypto/conf/conf_def.c \
	crypto/conf/conf_err.c crypto/conf/conf_lib.c crypto/conf/conf_mall.c \
	crypto/conf/conf_mod.c crypto/conf/conf_sap.c crypto/conf/conf_ssl.c \
	crypto/cpt_err.c crypto/cryptlib.c crypto/ct/ct_b64.c \
	crypto/ct/ct_err.c crypto/ct/ct_log.c crypto/ct/ct_oct.c \
	crypto/ct/ct_policy.c crypto/ct/ct_prn.c crypto/ct/ct_sct.c \
	crypto/ct/ct_sct_ctx.c crypto/ct/ct_vfy.c crypto/ct/ct_x509v3.c \
	crypto/ctype.c crypto/cversion.c crypto/des/cbc_cksm.c \
	crypto/des/cbc_enc.c crypto/des/cfb64ede.c crypto/des/cfb64enc.c \
	crypto/des/cfb_enc.c crypto/des/des_enc.c crypto/des/ecb3_enc.c \
	crypto/des/ecb_enc.c crypto/des/fcrypt.c crypto/des/fcrypt_b.c \
	crypto/des/ofb64ede.c crypto/des/ofb64enc.c crypto/des/ofb_enc.c \
	crypto/des/pcbc_enc.c crypto/des/qud_cksm.c crypto/des/rand_key.c \
	crypto/des/set_key.c crypto/des/str2key.c crypto/des/xcbc_enc.c \
	crypto/dh/dh_ameth.c crypto/dh/dh_asn1.c crypto/dh/dh_check.c \
	crypto/dh/dh_depr.c crypto/dh/dh_err.c crypto/dh/dh_gen.c \
	crypto/dh/dh_kdf.c crypto/dh/dh_key.c crypto/dh/dh_lib.c \
	crypto/dh/dh_meth.c crypto/dh/dh_pmeth.c crypto/dh/dh_prn.c \
	crypto/dh/dh_rfc5114.c crypto/dh/dh_rfc7919.c crypto/dsa/dsa_ameth.c \
	crypto/dsa/dsa_asn1.c crypto/dsa/dsa_depr.c crypto/dsa/dsa_err.c \
	crypto/dsa/dsa_gen.c crypto/dsa/dsa_key.c crypto/dsa/dsa_lib.c \
	crypto/dsa/dsa_meth.c crypto/dsa/dsa_ossl.c crypto/dsa/dsa_pmeth.c \
	crypto/dsa/dsa_prn.c crypto/dsa/dsa_sign.c crypto/dsa/dsa_vrf.c \
	crypto/dso/dso_dl.c crypto/dso/dso_dlfcn.c crypto/dso/dso_err.c \
	crypto/dso/dso_lib.c crypto/dso/dso_openssl.c crypto/dso/dso_vms.c \
	crypto/dso/dso_win32.c crypto/ebcdic.c crypto/ec/curve25519.c \
	crypto/ec/curve448/f_impl.c crypto/ec/curve448/curve448.c \
	crypto/ec/curve448/curve448_tables.c crypto/ec/curve448/eddsa.c \
	crypto/ec/curve448/f_generic.c crypto/ec/curve448/scalar.c \
	crypto/ec/ec2_oct.c crypto/ec/ec2_smpl.c crypto/ec/ec_ameth.c \
	crypto/ec/ec_asn1.c crypto/ec/ec_check.c crypto/ec/ec_curve.c \
	crypto/ec/ec_cvt.c crypto/ec/ec_err.c crypto/ec/ec_key.c \
	crypto/ec/ec_kmeth.c crypto/ec/ec_lib.c crypto/ec/ec_mult.c \
	crypto/ec/ec_oct.c crypto/ec/ec_pmeth.c crypto/ec/ec_print.c \
	crypto/ec/ecdh_kdf.c crypto/ec/ecdh_ossl.c crypto/ec/ecdsa_ossl.c \
	crypto/ec/ecdsa_sign.c crypto/ec/ecdsa_vrf.c crypto/ec/eck_prn.c \
	crypto/ec/ecp_mont.c crypto/ec/ecp_nist.c crypto/ec/ecp_nistp224.c \
	crypto/ec/ecp_nistp256.c crypto/ec/ecp_nistp521.c \
	crypto/ec/ecp_nistputil.c crypto/ec/ecp_oct.c crypto/ec/ecp_smpl.c \
	crypto/ec/ecx_meth.c crypto/engine/eng_all.c crypto/engine/eng_cnf.c \
	crypto/engine/eng_ctrl.c crypto/engine/eng_dyn.c \
	crypto/engine/eng_err.c crypto/engine/eng_fat.c \
	crypto/engine/eng_init.c crypto/engine/eng_lib.c \
	crypto/engine/eng_list.c crypto/engine/eng_openssl.c \
	crypto/engine/eng_pkey.c crypto/engine/eng_rdrand.c \
	crypto/engine/eng_table.c crypto/engine/tb_asnmth.c \
	crypto/engine/tb_cipher.c crypto/engine/tb_dh.c \
	crypto/engine/tb_digest.c crypto/engine/tb_dsa.c \
	crypto/engine/tb_eckey.c crypto/engine/tb_pkmeth.c \
	crypto/engine/tb_rand.c crypto/engine/tb_rsa.c crypto/err/err.c \
	crypto/err/err_all.c crypto/err/err_prn.c crypto/evp/bio_b64.c \
	crypto/evp/bio_enc.c crypto/evp/bio_md.c crypto/evp/bio_ok.c \
	crypto/evp/c_allc.c crypto/evp/c_alld.c crypto/evp/cmeth_lib.c \
	crypto/evp/digest.c crypto/evp/e_aes.c crypto/evp/e_aes_cbc_hmac_sha1.c \
	crypto/evp/e_aes_cbc_hmac_sha256.c crypto/evp/e_aria.c \
	crypto/evp/e_bf.c crypto/evp/e_camellia.c crypto/evp/e_cast.c \
	crypto/evp/e_chacha20_poly1305.c crypto/evp/e_des.c crypto/evp/e_des3.c \
	crypto/evp/e_idea.c crypto/evp/e_null.c crypto/evp/e_old.c \
	crypto/evp/e_rc2.c crypto/evp/e_rc4.c crypto/evp/e_rc4_hmac_md5.c \
	crypto/evp/e_rc5.c crypto/evp/e_seed.c crypto/evp/e_sm4.c \
	crypto/evp/e_xcbc_d.c crypto/evp/encode.c crypto/evp/evp_cnf.c \
	crypto/evp/evp_enc.c crypto/evp/evp_err.c crypto/evp/evp_key.c \
	crypto/evp/evp_lib.c crypto/evp/evp_pbe.c crypto/evp/evp_pkey.c \
	crypto/evp/m_md2.c crypto/evp/m_md4.c crypto/evp/m_md5.c \
	crypto/evp/m_md5_sha1.c crypto/evp/m_mdc2.c crypto/evp/m_null.c \
	crypto/evp/m_ripemd.c crypto/evp/m_sha1.c crypto/evp/m_sha3.c \
	crypto/evp/m_sigver.c crypto/evp/m_wp.c crypto/evp/names.c \
	crypto/evp/p5_crpt.c crypto/evp/p5_crpt2.c crypto/evp/p_dec.c \
	crypto/evp/p_enc.c crypto/evp/p_lib.c crypto/evp/p_open.c \
	crypto/evp/p_seal.c crypto/evp/p_sign.c crypto/evp/p_verify.c \
	crypto/evp/pbe_scrypt.c crypto/evp/pmeth_fn.c crypto/evp/pmeth_gn.c \
	crypto/evp/pmeth_lib.c crypto/ex_data.c crypto/getenv.c \
	crypto/hmac/hm_ameth.c crypto/hmac/hm_pmeth.c crypto/hmac/hmac.c \
	crypto/idea/i_cbc.c crypto/idea/i_cfb64.c crypto/idea/i_ecb.c \
	crypto/idea/i_ofb64.c crypto/idea/i_skey.c crypto/init.c \
	crypto/kdf/hkdf.c crypto/kdf/kdf_err.c crypto/kdf/scrypt.c \
	crypto/kdf/tls1_prf.c crypto/lhash/lh_stats.c crypto/lhash/lhash.c \
	crypto/md4/md4_dgst.c crypto/md4/md4_one.c crypto/md5/md5_dgst.c \
	crypto/md5/md5_one.c crypto/mdc2/mdc2_one.c crypto/mdc2/mdc2dgst.c \
	crypto/mem.c crypto/mem_clr.c crypto/mem_dbg.c crypto/mem_sec.c \
	crypto/modes/cbc128.c crypto/modes/ccm128.c crypto/modes/cfb128.c \
	crypto/modes/ctr128.c crypto/modes/cts128.c crypto/modes/gcm128.c \
	crypto/modes/ocb128.c crypto/modes/ofb128.c crypto/modes/wrap128.c \
	crypto/modes/xts128.c crypto/o_dir.c crypto/o_fips.c crypto/o_fopen.c \
	crypto/o_init.c crypto/o_str.c crypto/o_time.c crypto/objects/o_names.c \
	crypto/objects/obj_dat.c crypto/objects/obj_err.c \
	crypto/objects/obj_lib.c crypto/objects/obj_xref.c \
	crypto/ocsp/ocsp_asn.c crypto/ocsp/ocsp_cl.c crypto/ocsp/ocsp_err.c \
	crypto/ocsp/ocsp_ext.c crypto/ocsp/ocsp_ht.c crypto/ocsp/ocsp_lib.c \
	crypto/ocsp/ocsp_prn.c crypto/ocsp/ocsp_srv.c crypto/ocsp/ocsp_vfy.c \
	crypto/ocsp/v3_ocsp.c crypto/pem/pem_all.c crypto/pem/pem_err.c \
	crypto/pem/pem_info.c crypto/pem/pem_lib.c crypto/pem/pem_oth.c \
	crypto/pem/pem_pk8.c crypto/pem/pem_pkey.c crypto/pem/pem_sign.c \
	crypto/pem/pem_x509.c crypto/pem/pem_xaux.c crypto/pem/pvkfmt.c \
	crypto/pkcs12/p12_add.c crypto/pkcs12/p12_asn.c \
	crypto/pkcs12/p12_attr.c crypto/pkcs12/p12_crpt.c \
	crypto/pkcs12/p12_crt.c crypto/pkcs12/p12_decr.c \
	crypto/pkcs12/p12_init.c crypto/pkcs12/p12_key.c \
	crypto/pkcs12/p12_kiss.c crypto/pkcs12/p12_mutl.c \
	crypto/pkcs12/p12_npas.c crypto/pkcs12/p12_p8d.c \
	crypto/pkcs12/p12_p8e.c crypto/pkcs12/p12_sbag.c \
	crypto/pkcs12/p12_utl.c crypto/pkcs12/pk12err.c crypto/pkcs7/bio_pk7.c \
	crypto/pkcs7/pk7_asn1.c crypto/pkcs7/pk7_attr.c crypto/pkcs7/pk7_doit.c \
	crypto/pkcs7/pk7_lib.c crypto/pkcs7/pk7_mime.c crypto/pkcs7/pk7_smime.c \
	crypto/pkcs7/pkcs7err.c crypto/poly1305/poly1305.c \
	crypto/poly1305/poly1305_ameth.c crypto/poly1305/poly1305_pmeth.c \
	crypto/rand/drbg_ctr.c crypto/rand/drbg_lib.c crypto/rand/rand_egd.c \
	crypto/rand/rand_err.c crypto/rand/rand_lib.c crypto/rand/rand_unix.c \
	crypto/rand/rand_vms.c crypto/rand/rand_win.c crypto/rand/randfile.c \
	crypto/rc2/rc2_cbc.c crypto/rc2/rc2_ecb.c crypto/rc2/rc2_skey.c \
	crypto/rc2/rc2cfb64.c crypto/rc2/rc2ofb64.c crypto/rc4/rc4_enc.c \
	crypto/rc4/rc4_skey.c crypto/ripemd/rmd_dgst.c crypto/ripemd/rmd_one.c \
	crypto/rsa/rsa_ameth.c crypto/rsa/rsa_asn1.c crypto/rsa/rsa_chk.c \
	crypto/rsa/rsa_crpt.c crypto/rsa/rsa_depr.c crypto/rsa/rsa_err.c \
	crypto/rsa/rsa_gen.c crypto/rsa/rsa_lib.c crypto/rsa/rsa_meth.c \
	crypto/rsa/rsa_mp.c crypto/rsa/rsa_none.c crypto/rsa/rsa_oaep.c \
	crypto/rsa/rsa_ossl.c crypto/rsa/rsa_pk1.c crypto/rsa/rsa_pmeth.c \
	crypto/rsa/rsa_prn.c crypto/rsa/rsa_pss.c crypto/rsa/rsa_saos.c \
	crypto/rsa/rsa_sign.c crypto/rsa/rsa_ssl.c crypto/rsa/rsa_x931.c \
	crypto/rsa/rsa_x931g.c crypto/seed/seed.c crypto/seed/seed_cbc.c \
	crypto/seed/seed_cfb.c crypto/seed/seed_ecb.c crypto/seed/seed_ofb.c \
	crypto/sha/keccak1600.c crypto/sha/sha1_one.c crypto/sha/sha1dgst.c \
	crypto/sha/sha256.c crypto/sha/sha512.c crypto/siphash/siphash.c \
	crypto/siphash/siphash_ameth.c crypto/siphash/siphash_pmeth.c \
	crypto/sm2/sm2_crypt.c crypto/sm2/sm2_err.c crypto/sm2/sm2_pmeth.c \
	crypto/sm2/sm2_sign.c crypto/sm3/m_sm3.c crypto/sm3/sm3.c \
	crypto/sm4/sm4.c crypto/srp/srp_lib.c crypto/srp/srp_vfy.c \
	crypto/stack/stack.c crypto/store/loader_file.c \
	crypto/store/store_err.c crypto/store/store_init.c \
	crypto/store/store_lib.c crypto/store/store_register.c \
	crypto/store/store_strings.c crypto/threads_none.c \
	crypto/threads_pthread.c crypto/threads_win.c crypto/ts/ts_asn1.c \
	crypto/ts/ts_conf.c crypto/ts/ts_err.c crypto/ts/ts_lib.c \
	crypto/ts/ts_req_print.c crypto/ts/ts_req_utils.c \
	crypto/ts/ts_rsp_print.c crypto/ts/ts_rsp_sign.c \
	crypto/ts/ts_rsp_utils.c crypto/ts/ts_rsp_verify.c \
	crypto/ts/ts_verify_ctx.c crypto/txt_db/txt_db.c crypto/ui/ui_err.c \
	crypto/ui/ui_lib.c crypto/ui/ui_null.c crypto/ui/ui_openssl.c \
	crypto/ui/ui_util.c crypto/uid.c crypto/whrlpool/wp_block.c \
	crypto/whrlpool/wp_dgst.c crypto/x509/by_dir.c crypto/x509/by_file.c \
	crypto/x509/t_crl.c crypto/x509/t_req.c crypto/x509/t_x509.c \
	crypto/x509/x509_att.c crypto/x509/x509_cmp.c crypto/x509/x509_d2.c \
	crypto/x509/x509_def.c crypto/x509/x509_err.c crypto/x509/x509_ext.c \
	crypto/x509/x509_lu.c crypto/x509/x509_meth.c crypto/x509/x509_obj.c \
	crypto/x509/x509_r2x.c crypto/x509/x509_req.c crypto/x509/x509_set.c \
	crypto/x509/x509_trs.c crypto/x509/x509_txt.c crypto/x509/x509_v3.c \
	crypto/x509/x509_vfy.c crypto/x509/x509_vpm.c crypto/x509/x509cset.c \
	crypto/x509/x509name.c crypto/x509/x509rset.c crypto/x509/x509spki.c \
	crypto/x509/x509type.c crypto/x509/x_all.c crypto/x509/x_attrib.c \
	crypto/x509/x_crl.c crypto/x509/x_exten.c crypto/x509/x_name.c \
	crypto/x509/x_pubkey.c crypto/x509/x_req.c crypto/x509/x_x509.c \
	crypto/x509/x_x509a.c crypto/x509v3/pcy_cache.c \
	crypto/x509v3/pcy_data.c crypto/x509v3/pcy_lib.c \
	crypto/x509v3/pcy_map.c crypto/x509v3/pcy_node.c \
	crypto/x509v3/pcy_tree.c crypto/x509v3/v3_addr.c \
	crypto/x509v3/v3_admis.c crypto/x509v3/v3_akey.c \
	crypto/x509v3/v3_akeya.c crypto/x509v3/v3_alt.c crypto/x509v3/v3_asid.c \
	crypto/x509v3/v3_bcons.c crypto/x509v3/v3_bitst.c \
	crypto/x509v3/v3_conf.c crypto/x509v3/v3_cpols.c \
	crypto/x509v3/v3_crld.c crypto/x509v3/v3_enum.c \
	crypto/x509v3/v3_extku.c crypto/x509v3/v3_genn.c crypto/x509v3/v3_ia5.c \
	crypto/x509v3/v3_info.c crypto/x509v3/v3_int.c crypto/x509v3/v3_lib.c \
	crypto/x509v3/v3_ncons.c crypto/x509v3/v3_pci.c crypto/x509v3/v3_pcia.c \
	crypto/x509v3/v3_pcons.c crypto/x509v3/v3_pku.c \
	crypto/x509v3/v3_pmaps.c crypto/x509v3/v3_prn.c crypto/x509v3/v3_purp.c \
	crypto/x509v3/v3_skey.c crypto/x509v3/v3_sxnet.c \
	crypto/x509v3/v3_tlsf.c crypto/x509v3/v3_utl.c crypto/x509v3/v3err.c \
	engines/e_capi.c engines/e_padlock.c \
	$(empty)
LIBSSL_SRCS = \
	ssl/bio_ssl.c ssl/d1_lib.c ssl/d1_msg.c ssl/d1_srtp.c \
	ssl/methods.c ssl/packet.c ssl/pqueue.c ssl/record/dtls1_bitmap.c \
	ssl/record/rec_layer_d1.c ssl/record/rec_layer_s3.c \
	ssl/record/ssl3_buffer.c ssl/record/ssl3_record.c \
	ssl/record/ssl3_record_tls13.c ssl/s3_cbc.c ssl/s3_enc.c ssl/s3_lib.c \
	ssl/s3_msg.c ssl/ssl_asn1.c ssl/ssl_cert.c ssl/ssl_ciph.c \
	ssl/ssl_conf.c ssl/ssl_err.c ssl/ssl_init.c ssl/ssl_lib.c \
	ssl/ssl_mcnf.c ssl/ssl_rsa.c ssl/ssl_sess.c ssl/ssl_stat.c \
	ssl/ssl_txt.c ssl/ssl_utst.c ssl/statem/extensions.c \
	ssl/statem/extensions_clnt.c ssl/statem/extensions_cust.c \
	ssl/statem/extensions_srvr.c ssl/statem/statem.c \
	ssl/statem/statem_clnt.c ssl/statem/statem_dtls.c \
	ssl/statem/statem_lib.c ssl/statem/statem_srvr.c ssl/t1_enc.c \
	ssl/t1_lib.c ssl/t1_trce.c ssl/tls13_enc.c ssl/tls_srp.c \
	$(empty)
LIBTESTUTIL_SRCS = \
	test/testutil/basic_output.c test/testutil/cb.c \
	test/testutil/driver.c test/testutil/format_output.c \
	test/testutil/main.c test/testutil/output_helpers.c \
	test/testutil/random.c test/testutil/stanza.c test/testutil/tap_bio.c \
	test/testutil/test_cleanup.c test/testutil/tests.c \
	test/testutil/testutil_init.c \
	$(empty)

OPENSSL_SRCS = \
	apps/asn1pars.c apps/ca.c apps/ciphers.c apps/cms.c apps/crl.c \
	apps/crl2p7.c apps/dgst.c apps/dhparam.c apps/dsa.c apps/dsaparam.c \
	apps/ec.c apps/ecparam.c apps/enc.c apps/engine.c apps/errstr.c \
	apps/gendsa.c apps/genpkey.c apps/genrsa.c apps/nseq.c apps/ocsp.c \
	apps/openssl.c apps/passwd.c apps/pkcs12.c apps/pkcs7.c apps/pkcs8.c \
	apps/pkey.c apps/pkeyparam.c apps/pkeyutl.c apps/prime.c apps/rand.c \
	apps/rehash.c apps/req.c apps/rsa.c apps/rsautl.c apps/s_client.c \
	apps/s_server.c apps/s_time.c apps/sess_id.c apps/smime.c apps/speed.c \
	apps/spkac.c apps/srp.c apps/storeutl.c apps/ts.c apps/verify.c \
	apps/version.c apps/x509.c \
	$(empty)

ALL_SRCS = $(LIBAPPS_SRCS) $(LIBCRYPTO_SRCS) $(LIBSSL_SRCS) $(LIBTESTUTIL_SRCS) $(OPENSSL_SRCS)
$(foreach f,$(ALL_SRCS:.c=),$(eval $(call CC_TEMPLATE,$(f))))

$(eval $(call AR_TEMPLATE,libapps.a,$(LIBAPPS_SRCS:.c=.o)))
$(eval $(call AR_TEMPLATE,libcrypto.a,$(LIBCRYPTO_SRCS:.c=.o)))
$(eval $(call AR_TEMPLATE,libssl.a,$(LIBSSL_SRCS:.c=.o)))
$(eval $(call AR_TEMPLATE,libtestutil.a,$(LIBTESTUTIL_SRCS:.c=.o)))


DEP = $(LIBS)

OPENSSL_OBJS = $(addprefix build/$(CPU_DIR)/,$(notdir $(OPENSSL_SRCS:.c=.o)))
apps/openssl: $(OPENSSL_OBJS) build/$(CPU_DIR)/libapps.a $(DEP)
	$(AM_V_CCLD)$(CC) $(CFLAGS) -Lbuild/$(CPU_DIR) $(LDFLAGS) $(OPENSSL_OBJS) -o $@ -lapps -lssl -lcrypto $(EX_LIBS)


define LD_TEMPLATE
$(1): $(2) $(DEP)
	$(AM_V_at)$(ECHO_E) "  $(am__v_color_ld)CCLD$(am__v_color_off)    " $$@
	$(AM_V_at)$(CC) $(TEST_CFLAGS) $(LOCAL_CFLAGS) -Lbuild/$(CPU_DIR) $(LDFLAGS) -o $$@ $(2) $(3) -lssl -lcrypto $(EX_LIBS)
endef

$(eval $(call LD_TEMPLATE,fuzz/asn1-test,     fuzz/asn1.c fuzz/test-corpus.c))
$(eval $(call LD_TEMPLATE,fuzz/asn1parse-test,fuzz/asn1parse.c fuzz/test-corpus.c))
$(eval $(call LD_TEMPLATE,fuzz/bignum-test,   fuzz/bignum.c fuzz/test-corpus.c))
$(eval $(call LD_TEMPLATE,fuzz/bndiv-test,    fuzz/bndiv.c fuzz/test-corpus.c))
$(eval $(call LD_TEMPLATE,fuzz/client-test,   fuzz/client.c fuzz/test-corpus.c))
$(eval $(call LD_TEMPLATE,fuzz/cms-test,      fuzz/fuzz_cms.c fuzz/test-corpus.c))
$(eval $(call LD_TEMPLATE,fuzz/conf-test,     fuzz/conf.c fuzz/test-corpus.c))
$(eval $(call LD_TEMPLATE,fuzz/crl-test,      fuzz/fuzz_crl.c fuzz/test-corpus.c))
$(eval $(call LD_TEMPLATE,fuzz/ct-test,       fuzz/ct.c fuzz/test-corpus.c))
$(eval $(call LD_TEMPLATE,fuzz/server-test,   fuzz/server.c fuzz/test-corpus.c))
$(eval $(call LD_TEMPLATE,fuzz/x509-test,     fuzz/fuzz_x509.c fuzz/test-corpus.c))

$(eval $(call LD_TEMPLATE,test/aborttest, test/aborttest.c))
$(eval $(call LD_TEMPLATE,test/afalgtest, test/afalgtest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/asn1_decode_test, test/asn1_decode_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/asn1_encode_test, test/asn1_encode_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/asn1_internal_test, test/asn1_internal_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/asn1_string_table_test, test/asn1_string_table_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/asn1_time_test, test/asn1_time_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/asynciotest, test/asynciotest.c test/ssltestlib.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/asynctest, test/asynctest.c))
$(eval $(call LD_TEMPLATE,test/bad_dtls_test, test/bad_dtls_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/bftest, test/bftest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/bio_callback_test, test/bio_callback_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/bio_enc_test, test/bio_enc_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/bio_memleak_test, test/bio_memleak_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/bioprinttest, test/bioprinttest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/bntest, test/bntest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/buildtest_c_aes, test/buildtest_aes.c))
test/buildtest_aes.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl aes > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_asn1, test/buildtest_asn1.c))
test/buildtest_asn1.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl asn1 > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_asn1t, test/buildtest_asn1t.c))
test/buildtest_asn1t.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl asn1t > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_async, test/buildtest_async.c))
test/buildtest_async.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl async > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_bio, test/buildtest_bio.c))
test/buildtest_bio.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl bio > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_blowfish, test/buildtest_blowfish.c))
test/buildtest_blowfish.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl blowfish > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_bn, test/buildtest_bn.c))
test/buildtest_bn.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl bn > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_buffer, test/buildtest_buffer.c))
test/buildtest_buffer.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl buffer > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_camellia, test/buildtest_camellia.c))
test/buildtest_camellia.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl camellia > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_cast, test/buildtest_cast.c))
test/buildtest_cast.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl cast > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_cmac, test/buildtest_cmac.c))
test/buildtest_cmac.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl cmac > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_cms, test/buildtest_cms.c))
test/buildtest_cms.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl cms > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_comp, test/buildtest_comp.c))
test/buildtest_comp.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl comp > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_conf, test/buildtest_conf.c))
test/buildtest_conf.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl conf > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_conf_api, test/buildtest_conf_api.c))
test/buildtest_conf_api.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl conf_api > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_crypto, test/buildtest_crypto.c))
test/buildtest_crypto.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl crypto > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_ct, test/buildtest_ct.c))
test/buildtest_ct.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl ct > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_des, test/buildtest_des.c))
test/buildtest_des.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl des > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_dh, test/buildtest_dh.c))
test/buildtest_dh.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl dh > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_dsa, test/buildtest_dsa.c))
test/buildtest_dsa.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl dsa > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_dtls1, test/buildtest_dtls1.c))
test/buildtest_dtls1.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl dtls1 > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_e_os2, test/buildtest_e_os2.c))
test/buildtest_e_os2.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl e_os2 > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_ebcdic, test/buildtest_ebcdic.c))
test/buildtest_ebcdic.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl ebcdic > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_ec, test/buildtest_ec.c))
test/buildtest_ec.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl ec > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_ecdh, test/buildtest_ecdh.c))
test/buildtest_ecdh.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl ecdh > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_ecdsa, test/buildtest_ecdsa.c))
test/buildtest_ecdsa.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl ecdsa > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_engine, test/buildtest_engine.c))
test/buildtest_engine.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl engine > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_evp, test/buildtest_evp.c))
test/buildtest_evp.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl evp > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_hmac, test/buildtest_hmac.c))
test/buildtest_hmac.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl hmac > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_idea, test/buildtest_idea.c))
test/buildtest_idea.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl idea > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_kdf, test/buildtest_kdf.c))
test/buildtest_kdf.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl kdf > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_lhash, test/buildtest_lhash.c))
test/buildtest_lhash.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl lhash > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_md4, test/buildtest_md4.c))
test/buildtest_md4.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl md4 > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_md5, test/buildtest_md5.c))
test/buildtest_md5.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl md5 > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_mdc2, test/buildtest_mdc2.c))
test/buildtest_mdc2.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl mdc2 > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_modes, test/buildtest_modes.c))
test/buildtest_modes.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl modes > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_obj_mac, test/buildtest_obj_mac.c))
test/buildtest_obj_mac.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl obj_mac > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_objects, test/buildtest_objects.c))
test/buildtest_objects.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl objects > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_ocsp, test/buildtest_ocsp.c))
test/buildtest_ocsp.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl ocsp > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_opensslv, test/buildtest_opensslv.c))
test/buildtest_opensslv.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl opensslv > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_ossl_typ, test/buildtest_ossl_typ.c))
test/buildtest_ossl_typ.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl ossl_typ > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_pem, test/buildtest_pem.c))
test/buildtest_pem.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl pem > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_pem2, test/buildtest_pem2.c))
test/buildtest_pem2.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl pem2 > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_pkcs12, test/buildtest_pkcs12.c))
test/buildtest_pkcs12.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl pkcs12 > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_pkcs7, test/buildtest_pkcs7.c))
test/buildtest_pkcs7.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl pkcs7 > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_rand, test/buildtest_rand.c))
test/buildtest_rand.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl rand > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_rand_drbg, test/buildtest_rand_drbg.c))
test/buildtest_rand_drbg.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl rand_drbg > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_rc2, test/buildtest_rc2.c))
test/buildtest_rc2.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl rc2 > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_rc4, test/buildtest_rc4.c))
test/buildtest_rc4.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl rc4 > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_ripemd, test/buildtest_ripemd.c))
test/buildtest_ripemd.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl ripemd > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_rsa, test/buildtest_rsa.c))
test/buildtest_rsa.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl rsa > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_safestack, test/buildtest_safestack.c))
test/buildtest_safestack.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl safestack > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_seed, test/buildtest_seed.c))
test/buildtest_seed.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl seed > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_sha, test/buildtest_sha.c))
test/buildtest_sha.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl sha > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_srp, test/buildtest_srp.c))
test/buildtest_srp.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl srp > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_srtp, test/buildtest_srtp.c))
test/buildtest_srtp.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl srtp > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_ssl, test/buildtest_ssl.c))
test/buildtest_ssl.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl ssl > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_ssl2, test/buildtest_ssl2.c))
test/buildtest_ssl2.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl ssl2 > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_stack, test/buildtest_stack.c))
test/buildtest_stack.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl stack > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_store, test/buildtest_store.c))
test/buildtest_store.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl store > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_symhacks, test/buildtest_symhacks.c))
test/buildtest_symhacks.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl symhacks > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_tls1, test/buildtest_tls1.c))
test/buildtest_tls1.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl tls1 > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_ts, test/buildtest_ts.c))
test/buildtest_ts.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl ts > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_txt_db, test/buildtest_txt_db.c))
test/buildtest_txt_db.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl txt_db > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_ui, test/buildtest_ui.c))
test/buildtest_ui.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl ui > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_whrlpool, test/buildtest_whrlpool.c))
test/buildtest_whrlpool.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl whrlpool > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_x509, test/buildtest_x509.c))
test/buildtest_x509.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl x509 > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_x509_vfy, test/buildtest_x509_vfy.c))
test/buildtest_x509_vfy.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl x509_vfy > $@
$(eval $(call LD_TEMPLATE,test/buildtest_c_x509v3, test/buildtest_x509v3.c))
test/buildtest_x509v3.c: test/generate_buildtest.pl 
	$(AM_V_GEN)$(PERL) test/generate_buildtest.pl x509v3 > $@
$(eval $(call LD_TEMPLATE,test/casttest, test/casttest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/chacha_internal_test, test/chacha_internal_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/cipher_overhead_test, test/cipher_overhead_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/cipherbytes_test, test/cipherbytes_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/cipherlist_test, test/cipherlist_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/ciphername_test, test/ciphername_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/clienthellotest, test/clienthellotest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/cmactest, test/cmactest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/cmsapitest, test/cmsapitest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/conf_include_test, test/conf_include_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/constant_time_test, test/constant_time_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/crltest, test/crltest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/ct_test, test/ct_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/ctype_internal_test, test/ctype_internal_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/curve448_internal_test, test/curve448_internal_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/d2i_test, test/d2i_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/danetest, test/danetest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/destest, test/destest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/dhtest, test/dhtest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/drbg_cavs_test, test/drbg_cavs_data.c test/drbg_cavs_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/drbgtest, test/drbgtest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/dsa_no_digest_size_test, test/dsa_no_digest_size_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/dsatest, test/dsatest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/dtls_mtu_test, test/dtls_mtu_test.c test/ssltestlib.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/dtlstest, test/dtlstest.c test/ssltestlib.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/dtlsv1listentest, test/dtlsv1listentest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/ec_internal_test, test/ec_internal_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/ecdsatest, test/ecdsatest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/ecstresstest, test/ecstresstest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/ectest, test/ectest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/enginetest, test/enginetest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/errtest, test/errtest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/evp_extra_test, test/evp_extra_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/evp_test, test/evp_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/exdatatest, test/exdatatest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/exptest, test/exptest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/fatalerrtest, test/fatalerrtest.c test/ssltestlib.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/gmdifftest, test/gmdifftest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/gosttest, test/gosttest.c test/ssltestlib.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/hmactest, test/hmactest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/ideatest, test/ideatest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/igetest, test/igetest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/lhash_test, test/lhash_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/md2test, test/md2test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/mdc2_internal_test, test/mdc2_internal_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/mdc2test, test/mdc2test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/memleaktest, test/memleaktest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/modes_internal_test, test/modes_internal_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/ocspapitest, test/ocspapitest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/packettest, test/packettest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/pbelutest, test/pbelutest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/pemtest, test/pemtest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/pkey_meth_kdf_test, test/pkey_meth_kdf_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/pkey_meth_test, test/pkey_meth_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/poly1305_internal_test, test/poly1305_internal_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/rc2test, test/rc2test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/rc4test, test/rc4test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/rc5test, test/rc5test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/rdrand_sanitytest, test/rdrand_sanitytest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/recordlentest, test/recordlentest.c test/ssltestlib.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/rsa_complex, test/rsa_complex.c))
$(eval $(call LD_TEMPLATE,test/rsa_mp_test, test/rsa_mp_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/rsa_test, test/rsa_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/sanitytest, test/sanitytest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/secmemtest, test/secmemtest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/servername_test, test/servername_test.c test/ssltestlib.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/siphash_internal_test, test/siphash_internal_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/sm2_internal_test, test/sm2_internal_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/sm4_internal_test, test/sm4_internal_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/srptest, test/srptest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/ssl_cert_table_internal_test, test/ssl_cert_table_internal_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/ssl_ctx_test, test/ssl_ctx_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/ssl_test, test/handshake_helper.c test/ssl_test.c test/ssl_test_ctx.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/ssl_test_ctx_test, test/ssl_test_ctx.c test/ssl_test_ctx_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/sslapitest, test/sslapitest.c test/ssltestlib.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/sslbuffertest, test/sslbuffertest.c test/ssltestlib.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/sslcorrupttest, test/sslcorrupttest.c test/ssltestlib.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/ssltest_old, test/ssltest_old.c))
$(eval $(call LD_TEMPLATE,test/stack_test, test/stack_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/sysdefaulttest, test/sysdefaulttest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/test_test, test/test_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/threadstest, test/threadstest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/time_offset_test, test/time_offset_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/tls13ccstest, test/ssltestlib.c test/tls13ccstest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/tls13encryptiontest, test/tls13encryptiontest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/uitest, test/uitest.c, -lapps -ltestutil))
test/uitest: build/$(CPU_DIR)/libapps.a
$(eval $(call LD_TEMPLATE,test/v3ext, test/v3ext.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/v3nametest, test/v3nametest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/verify_extra_test, test/verify_extra_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/versions, test/versions.c))
$(eval $(call LD_TEMPLATE,test/wpackettest, test/wpackettest.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/x509_check_cert_pkey_test, test/x509_check_cert_pkey_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/x509_dup_cert_test, test/x509_dup_cert_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/x509_internal_test, test/x509_internal_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/x509_time_test, test/x509_time_test.c, -ltestutil))
$(eval $(call LD_TEMPLATE,test/x509aux, test/x509aux.c, -ltestutil))

